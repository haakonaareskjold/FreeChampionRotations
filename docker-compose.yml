version: "3.8"
services:
        app:
                image: php:7.4-fpm
                container_name: app
                working_dir: /var/www/app
                restart: unless-stopped
                volumes:
                        - .:/var/www/app
                networks:
                        - fcrnetwork

        web:
                image: nginx:1.19.0-alpine
                container_name: web
                depends_on:
                        - app
                working_dir: /var/www/app
                restart: unless-stopped
                volumes:
                        - .:/var/www/app
                        - ./webserver/default.nginx:/etc/nginx/conf.d/default.conf
                ports:
                        - "80:80"
                networks:
                        - fcrnetwork


        composer:
                image: composer:1.10.8
                container_name: composer
                depends_on:
                        - web
                working_dir: /var/www/app
                command: composer install --no-dev
                volumes:
                        - .:/var/www/app
                networks:
                        - fcrnetwork

networks:
        fcrnetwork:
                driver: bridge
